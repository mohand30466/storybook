const getCwd = require('./get-cwd')
const getFn = require('./get-fn')

module.exports = (task, stamp) => {
  const fn = getFn(task)
  const hub = task.root()
  if (fn) {
    task.set({ done: false }, false)
    task.set(fn(task, hub, getCwd(task)), stamp)
  }
}
