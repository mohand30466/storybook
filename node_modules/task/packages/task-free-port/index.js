const findPort = require('../../src/util/find-port')
const getIp = require('../../src/util/get-ip')

module.exports = {
  types: {
    'free-port': task => findPort(task.get([ 'options', 'start', 'compute' ]) || 8080)
      .then(port => ({
        result: {
          val: port,
          ip: getIp()
        },
        done: true
      }))
  }
}
